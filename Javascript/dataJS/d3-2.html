<!DOCTYPE html>
<html>
  <head>
    <!-- D3.jsãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
      /* ãƒšãƒ¼ã‚¸å…¨ä½“ã®è¨­å®š */
      body {
        margin: 0; /* ä½™ç™½ã‚’ã‚¼ãƒ­ã«ã™ã‚‹ */
        overflow: hidden; /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ãŒå‡ºãªã„ã‚ˆã†ã«ã™ã‚‹ */
        background: #0f172a; /* èƒŒæ™¯è‰²ã‚’æš—ã„é’ã«ã™ã‚‹ */
      }
      .bubble {
        cursor: pointer; /* ãƒãƒ–ãƒ«ã«ãƒã‚¦ã‚¹ã‚’ä¹—ã›ã‚‹ã¨æŒ‡ã‚«ãƒ¼ã‚½ãƒ«ã«ãªã‚‹ */
        transition: all 0.3s ease; /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®å‹•ãã‚’ãªã‚ã‚‰ã‹ã«ã™ã‚‹ */
      }
      .bubble:hover {
        filter: brightness(1.2); /* ãƒã‚¦ã‚¹ã‚’ä¹—ã›ãŸã¨ãå°‘ã—æ˜ã‚‹ãã™ã‚‹ */
      }
      text {
        fill: rgba(255, 255, 255, 0.9); /* æ–‡å­—è‰²ã‚’ç™½ã«è¿‘ã„è‰²ã«ã™ã‚‹ */
        font-size: 14px; /* æ–‡å­—ã‚µã‚¤ã‚ºã‚’è¨­å®š */
        font-weight: 500; /* æ–‡å­—ã®å¤ªã•ã‚’ä¸­ãã‚‰ã„ã«ã™ã‚‹ */
        letter-spacing: 0.5px; /* æ–‡å­—ã®é–“éš”ã‚’å°‘ã—åºƒã’ã‚‹ */
      }
    </style>
  </head>
  <body>
    <!-- ã‚°ãƒ©ãƒ•ã‚’è¡¨ç¤ºã™ã‚‹ã‚¨ãƒªã‚¢ -->
    <div id="canvas"></div>
    <script>
      // ãƒãƒ–ãƒ«ã«è¡¨ç¤ºã™ã‚‹ãƒ‡ãƒ¼ã‚¿
      const data = [
        { name: "ğŸ’¼  #å‰¯æ¥­", size: 120 },
        { name: "ğŸœ  #ãƒ©ãƒ¼ãƒ¡ãƒ³", size: 150 },
        { name: "âœˆ  #æ—…è¡Œ", size: 100 },
        { name: "ğŸ“±  #è»¢è·", size: 130 },
        { name: "ğŸ®  #ã‚²ãƒ¼ãƒ ", size: 140 },
      ];

      // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºã‚’å–å¾—
      const width = window.innerWidth;
      const height = window.innerHeight;

      // SVGï¼ˆæç”»é ˜åŸŸï¼‰ã‚’ä½œæˆ
      const svg = d3
        .select("#canvas")
        .append("svg")
        .attr("width", width)
        .attr("height", height);

      // ãƒãƒ–ãƒ«ã®è‰²ã‚’è¨­å®š
      const colors = ["#818cf8", "#38bdf8", "#34d399", "#a78bfa", "#f472b6"];

      // ãƒãƒ–ãƒ«ãŒå‹•ãã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨­å®š
      const simulation = d3
        .forceSimulation(data)
        .force("center", d3.forceCenter(width / 2, height / 2))
        .force("charge", d3.forceManyBody().strength(50))
        .force("collision", d3.forceCollide().radius((d) => d.size + 10));

      // ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®šç¾©
      const gradients = svg
        .append("defs")
        .selectAll("linearGradient")
        .data(data)
        .enter()
        .append("linearGradient")
        .attr("id", (d, i) => `gradient-${i}`)
        .attr("gradientTransform", "rotate(45)");

      gradients
        .append("stop")
        .attr("offset", "0%")
        .attr("stop-color", (d, i) => colors[i])
        .attr("stop-opacity", 0.8);

      gradients
        .append("stop")
        .attr("offset", "100%")
        .attr("stop-color", (d, i) => d3.rgb(colors[i]).darker(0.5))
        .attr("stop-opacity", 0.6);

      // ãƒãƒ–ãƒ«ã‚’ä½œæˆ
      const bubbles = svg
        .selectAll(".bubble")
        .data(data)
        .enter()
        .append("g")
        .attr("class", "bubble");

      // ãƒãƒ–ãƒ«ï¼ˆå††ï¼‰ã‚’æç”»
      bubbles
        .append("circle")
        .attr("r", (d) => d.size)
        .style("fill", (d, i) => `url(#gradient-${i})`)
        .style("stroke", (d, i) => colors[i])
        .style("stroke-width", "1px")
        .style("stroke-opacity", 0.3)
        .on("mouseover", function (event, d) {
          d3.select(this)
            .transition()
            .duration(400)
            .ease(d3.easeCubicOut)
            .attr("r", d.size * 1.1)
            .style("stroke-opacity", 0.8);
        })
        .on("mouseout", function (event, d) {
          d3.select(this)
            .transition()
            .duration(400)
            .ease(d3.easeCubicOut)
            .attr("r", d.size)
            .style("stroke-opacity", 0.3);
        })
        .on("click", function (event, d) {
          d3.select(this)
            .transition()
            .duration(300)
            .attr("r", d.size * 1.2)
            .transition()
            .duration(300)
            .attr("r", d.size);
        });

      // ãƒãƒ–ãƒ«å†…ã«æ–‡å­—ã‚’è¡¨ç¤º
      bubbles
        .append("text")
        .text((d) => d.name)
        .attr("text-anchor", "middle")
        .attr("dy", "0.35em")
        .style("font-size", "16px")
        .style("font-weight", "500")
        .style("pointer-events", "none")
        .style("opacity", 0.9);

      // ãƒãƒ–ãƒ«ãŒå‹•ããŸã³ã«ä½ç½®ã‚’æ›´æ–°
      simulation.on("tick", () => {
        bubbles.attr("transform", (d) => `translate(${d.x},${d.y})`);
      });

      // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºãŒå¤‰ã‚ã£ãŸã¨ãã«SVGã‚’èª¿æ•´
      window.addEventListener("resize", () => {
        const width = window.innerWidth;
        const height = window.innerHeight;
        svg.attr("width", width).attr("height", height);
        simulation.force("center", d3.forceCenter(width / 2, height / 2));
      });
    </script>
  </body>
</html>
